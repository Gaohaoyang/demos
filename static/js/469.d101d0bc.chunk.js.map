{"version":3,"file":"static/js/469.d101d0bc.chunk.js","mappings":"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","sources":["DialogQueueCtrl/temp/index.tsx","DialogQueueCtrl/temp/eventName.ts","DialogQueueCtrl/temp/dialogQueueCtrl.ts","DialogQueueCtrl/temp/Queue.ts","DialogQueueCtrl/temp/Portal.tsx","DialogQueueCtrl/temp/lockBodyScroll.ts","DialogQueueCtrl/demo/Dialog1.tsx","DialogQueueCtrl/demo/Dialog2.tsx","DialogQueueCtrl/demo/DIALOG_NAMES.ts","DialogQueueCtrl/demo/Dialog3.tsx","DialogQueueCtrl/demo/Dialog3_1.tsx","DialogQueueCtrl/demo/Dialog4.tsx","DialogQueueCtrl/demo/App.tsx","DialogQueueCtrl/index.tsx","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable no-console */\n/* eslint-disable @typescript-eslint/no-use-before-define */\nimport React, {\n  CSSProperties, useEffect, useState, Children, cloneElement,\n} from 'react'\nimport dialogQueueCtrl, { OpenInQueueType, CloseEventType } from './dialogQueueCtrl'\nimport Portal from './Portal'\nimport './index.css'\nimport eventName from './eventName'\nimport { lock, unlock } from './lockBodyScroll'\n\ninterface IDialogWrapProps {\n  /** 蒙层背景色 */\n  maskBgColor?: string\n  /** 弹窗弹出时，页面是否禁止滚动，默认为 true */\n  lockPageScroll?: boolean\n  /** 遮罩层和弹窗的 `z-index` 值 */\n  zIndex?: number\n  children: React.ReactNode\n}\n\nlet dialogData: any\n\nfunction DialogsWrap(props: IDialogWrapProps) {\n  const {\n    children, maskBgColor = 'rgba(0,0,0,0.7)', lockPageScroll = true, zIndex = 200,\n  } = props\n\n  const [style, setStyle] = useState<CSSProperties>({\n    opacity: 0,\n    transform: 'scale(0.1)',\n  })\n  const [withoutMask, setWithoutMask] = useState(false)\n  const [showDialogIndex, setShowDialogIndex] = useState(-1)\n\n  useEffect(() => {\n    /**\n     * 监听打开\n     */\n    document.addEventListener(eventName.OPEN_DIALOG, (e: any) => {\n      if (!e.detail.dialogName) {\n        console.warn('you may miss the dialogName')\n        return\n      }\n      if (e.detail.options.dialogData) {\n        dialogData = e.detail.options.dialogData\n      }\n\n      Children.forEach(children, (child: any, index: number) => {\n        if (e.detail.dialogName === child.props.dialogName) {\n          showDialog(index)\n        }\n      })\n\n      if (e.detail.options?.withoutMask) {\n        setWithoutMask(true)\n      } else {\n        setWithoutMask(false)\n      }\n    })\n\n    /**\n     * 监听关闭\n     */\n    document.addEventListener(eventName.CLOSE_DIALOG, (e: any) => {\n      hideDialog({ isLast: e.detail.isLast })\n    })\n  }, [])\n\n  const showDialog = (index: number) => {\n    setShowDialogIndex(index)\n    setTimeout(() => {\n      setStyle({\n        opacity: 1,\n        transform: 'scale(1)',\n      })\n      if (lockPageScroll) {\n        lock()\n      }\n    }, 20)\n  }\n\n  const hideDialog = ({ isLast = true }) => {\n    if (isLast) {\n      if (lockPageScroll) {\n        unlock()\n      }\n      setStyle({\n        opacity: 0,\n        transform: 'scale(1)',\n      })\n      setTimeout(() => {\n        setShowDialogIndex(-1)\n        dialogData = null\n        setStyle({\n          opacity: 0,\n          transform: 'scale(0.1)',\n        })\n      }, 180)\n    }\n  }\n\n  if (showDialogIndex === -1) return null\n\n  const renderDialog = (index: number) => {\n    let c\n    if (Children.count(children) === 1) {\n      c = children as React.ReactNode\n    } else {\n      c = (children as React.ReactNode[])[index]\n    }\n    if (dialogData) {\n      // @ts-ignore\n      c = cloneElement(c, { dialogData })\n    }\n    return c\n  }\n\n  return (\n    <Portal>\n      {withoutMask ? (\n        <>{renderDialog(showDialogIndex)}</>\n      ) : (\n        <div\n          className=\"dialog-queue-container\"\n          style={{\n            backgroundColor: maskBgColor,\n            opacity: style.opacity,\n            backdropFilter: 'blur(4px)',\n            WebkitBackdropFilter: 'blur(4px)',\n            zIndex,\n          }}\n        >\n          {renderDialog(showDialogIndex)}\n        </div>\n      )}\n    </Portal>\n  )\n}\n\nexport default DialogsWrap\n\nexport { dialogQueueCtrl }\n","const OPEN_DIALOG = 'OPEN_DIALOG_IN_QUEUE'\nconst CLOSE_DIALOG = 'CLOSE_DIALOG_IN_QUEUE'\n\nexport default {\n  OPEN_DIALOG,\n  CLOSE_DIALOG,\n}\n","import Queue from './Queue'\nimport eventName from './eventName'\n\ninterface OptionsType {\n  withoutMask?: boolean\n  animation?: 'zoomIn'\n  dialogData?: any\n}\nexport interface OpenInQueueType {\n  /** 弹窗名称 */\n  dialogName: string\n  /** 其他配置项 */\n  options: OptionsType | Record<string, never>\n}\nexport interface CloseEventType extends OpenInQueueType {\n  isLast?: boolean\n}\n\n// ----------------------------------------\n\nconst queue = new Queue()\n\n/**\n * 启动出队过程\n */\nconst runDequeue = () => {\n  document.dispatchEvent(\n    new CustomEvent<OpenInQueueType>(eventName.OPEN_DIALOG, {\n      detail: queue.front(),\n    }),\n  )\n}\n\n/**\n * 队列中打开\n */\nconst openInQueue = (dialogName: string, options: OptionsType = {}) => {\n  if (queue.isEmpty()) {\n    queue.enqueue({ dialogName, options })\n    runDequeue()\n  } else {\n    queue.enqueue({ dialogName, options })\n  }\n}\n\n/**\n * 插入到队首后面\n */\nconst cutToFrontNextInQueue = (dialogName: string, options: OptionsType = {}) => {\n  if (queue.isEmpty()) {\n    queue.enqueue({ dialogName, options })\n    runDequeue()\n  } else {\n    queue.cutToSecond({ dialogName, options })\n  }\n}\n\nconst close = () => {\n  let isLast = true // 是否为最后一个弹窗，关闭时动画会不同\n  if (queue.dataStore.length > 1) {\n    isLast = false\n  }\n  document.dispatchEvent(\n    new CustomEvent<CloseEventType>(eventName.CLOSE_DIALOG, {\n      detail: {\n        ...queue.front(),\n        isLast,\n      },\n    }),\n  )\n  queue.dequeue()\n\n  return new Promise((resolve) => {\n    if (queue.isEmpty()) {\n      setTimeout(() => {\n        resolve('') // todo\n      }, 200)\n    } else {\n      resolve('') // todo\n      runDequeue()\n    }\n  })\n}\n\nexport default {\n  openInQueue,\n  cutToFrontNextInQueue,\n  close,\n  queue,\n}\n","/**\n * 队列\n * 包含以下个主要 api\n * - enqueue\n * - dequeue\n * - cutToFront\n * - front\n * - back\n * - isEmpty\n */\nclass Queue {\n  constructor() {\n    this.dataStore = []\n  }\n\n  dataStore: any[]\n\n  /**\n   * enqueue\n   */\n  public enqueue(e: any): void {\n    this.dataStore.push(e)\n  }\n\n  /**\n   * dequeue\n   */\n  public dequeue() {\n    this.dataStore.shift()\n  }\n\n  /**\n   * 插队到队首\n   */\n  public cutToFront(e: any): void {\n    this.dataStore.unshift(e)\n  }\n\n  /**\n   * 插队到队首后面\n   */\n  public cutToSecond(e: any): void {\n    this.dataStore.splice(1, 0, e)\n  }\n\n  /**\n   * front\n   */\n  public front() {\n    return this.dataStore[0]\n  }\n\n  /**\n   * back\n   */\n  public back() {\n    return this.dataStore[this.dataStore.length - 1]\n  }\n\n  /**\n   * empty\n   */\n  public isEmpty(): boolean {\n    if (this.dataStore.length === 0) {\n      return true\n    }\n    return false\n  }\n\n  /**\n   * toString\n   */\n  public toString() {\n    return this.dataStore.join(',')\n  }\n}\n\nexport default Queue\n","import { useRef, useEffect } from 'react'\nimport { createPortal } from 'react-dom'\n\n/**\n * Portal 提供了一种将子元素渲染到存在于 DOM 组件层次结构之外的 DOM 节点\n * @param param\n * @returns\n */\n// @ts-ignore\nconst Portal = ({ children }) => {\n  const el = useRef(document.createElement('div'))\n\n  useEffect(() => {\n    document.body.appendChild(el.current)\n    const { parentElement } = el.current\n    return () => {\n      if (parentElement) {\n        parentElement.removeChild(el.current)\n      }\n    }\n  }, [])\n\n  return createPortal(children, el.current)\n}\n\nexport default Portal\n","const bodyElement = document.querySelector('body')\n// const scrollContainer: HTMLElement | null | undefined =\n// bodyElement?.parentElement;\n\nlet scrollTop = 0\n\n/**\n * 禁止 body 滚动\n */\nconst lock = () => {\n  if (!bodyElement) {\n    return\n  }\n  if (bodyElement.style.position !== 'fixed') {\n    scrollTop = window.scrollY\n  }\n  bodyElement.style.position = 'fixed'\n  bodyElement.style.top = `-${scrollTop}px`\n}\n\n/**\n * 解除禁止 body 滚动\n */\nconst unlock = () => {\n  if (!bodyElement) {\n    return\n  }\n  bodyElement.style.position = 'static'\n  bodyElement.style.top = 'unset'\n  window.scrollTo(0, scrollTop)\n}\n\n// const handleTouchmove = (e: TouchEvent) => {\n//   e.preventDefault();\n// };\n\n// const lock = () => {\n//   document.addEventListener('touchmove', handleTouchmove, { passive: false });\n// };\n// const unlock = () => {\n//   document.removeEventListener('touchmove', handleTouchmove);\n// };\n\nexport { lock, unlock }\n","/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable react/destructuring-assignment */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog1.css'\n\ninterface IProps {\n  money: number\n  dialogName: DIALOG_NAMES\n  dialogData?: {\n    name: string\n    a: number\n    b: {\n      ba: string\n    }\n  }\n}\n\nfunction Dialog1(props: IProps) {\n  const { money } = props\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">\n          Dialog1 ￥\n          {money}\n        </div>\n        <div className=\"content\">\n          name:\n          {' '}\n          {props.dialogData?.name}\n          {' '}\n          <br />\n          a:\n          {' '}\n          {props.dialogData?.a}\n          {' '}\n          <br />\n          ba:\n          {' '}\n          {props.dialogData?.b.ba}\n          {' '}\n          <br />\n          <br />\n          hello world!\n          <p>\n            1Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n          <p>\n            2Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n          <p>\n            3Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n          <p>\n            4Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n        </div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog1\n","/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog2.css'\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n}\n\nfunction Dialog2(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog 2</div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog2\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable @typescript-eslint/naming-convention */\nenum DIALOG_NAMES {\n  D1 = 'D1',\n  D2 = 'D2',\n  D3 = 'D3',\n  D3_1 = 'D3_1',\n  D4 = 'D4',\n}\n\nexport { DIALOG_NAMES }\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/button-has-type */\n/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog3.css'\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n}\n\nfunction Dialog3(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog3</div>\n        <button\n          onClick={() => {\n            dialogQueueCtrl.cutToFrontNextInQueue(DIALOG_NAMES.D4)\n            dialogQueueCtrl.close()\n          }}\n        >\n          将弹窗4插队\n        </button>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog3\n","/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog3_1.css'\n\ninterface DialogDataType {\n  name: string\n}\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n  dialogData?: DialogDataType\n  count: number\n}\n\nfunction Dialog3_1(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog3_1</div>\n        <div>测试没有 mask 的弹窗</div>\n        <div className=\"content\">\n          <div>\n            dialogData:\n            {' '}\n            {props.dialogData?.name}\n          </div>\n          <div>\n            count:\n            {' '}\n            {props.count}\n          </div>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n        </div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog3_1\n","/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/no-unused-prop-types */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog4.css'\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n}\n\nfunction Dialog4(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog4</div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog4\n","/* eslint-disable react/button-has-type */\n/* eslint-disable no-console */\nimport React, { useEffect, useState } from 'react'\nimport DialogsWrap, { dialogQueueCtrl } from '../temp/index'\nimport Dialog1 from './Dialog1'\nimport Dialog2 from './Dialog2'\nimport Dialog3 from './Dialog3'\nimport Dialog3d1 from './Dialog3_1'\nimport Dialog4 from './Dialog4'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\nimport './App.css'\n\nfunction App() {\n  const [money, setMoney] = useState(0)\n  const [count, setCount] = useState(0)\n  useEffect(() => {}, [])\n\n  useEffect(() => {\n    console.log(dialogQueueCtrl.queue.dataStore)\n  }, [])\n\n  return (\n    <>\n      hello\n      <h1>测试弹窗队列</h1>\n      <p>\n        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Animi dolor pariatur praesentium\n        voluptas eveniet quam quas commodi recusandae natus consequatur cum, exercitationem esse\n        laboriosam tenetur obcaecati accusamus aliquam nam error.\n      </p>\n      <button\n        onClick={() => {\n          setCount((pre) => pre + 1)\n          console.log('clicked')\n        }}\n      >\n        click me!\n      </button>\n      <h2>test</h2>\n      <button\n        onClick={() => {\n          dialogQueueCtrl.openInQueue(DIALOG_NAMES.D1, {\n            dialogData: {\n              name: 'dialog',\n              a: 2,\n              b: {\n                ba: 'blue',\n              },\n            },\n          })\n          setTimeout(() => {\n            setMoney(999)\n          }, 1000)\n          setTimeout(() => {\n            dialogQueueCtrl.openInQueue(DIALOG_NAMES.D2)\n          }, 20)\n          dialogQueueCtrl.openInQueue(DIALOG_NAMES.D3)\n          dialogQueueCtrl.openInQueue(DIALOG_NAMES.D3_1, {\n            withoutMask: true,\n            dialogData: {\n              name: 'chuanshi',\n            },\n          })\n        }}\n      >\n        open dialogs\n      </button>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Ex, non. Quod laborum distinctio\n        fuga nisi saepe qui ullam error iure eum excepturi quos, officia delectus, doloribus rerum\n        amet assumenda voluptatum.\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa neque, atque dolore tempora\n        laborum sint facilis possimus quia aliquid, praesentium consequuntur. Sapiente voluptatem\n        deserunt eius natus, corporis ipsam perspiciatis ullam!\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Iste asperiores a dicta mollitia\n        nobis placeat corrupti tempora odit magni accusantium maxime natus fuga facere tempore, quis\n        ratione! Ullam, exercitationem quasi.\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Non magnam maxime quibusdam,\n        inventore culpa unde velit, quae, ipsam rerum totam aspernatur reprehenderit sequi mollitia\n        vitae veniam cumque numquam deserunt iure!\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum labore sit ut, fugit eligendi\n        voluptas molestiae iusto, repellat sapiente voluptate necessitatibus cumque vitae suscipit\n        exercitationem. Dolorem aliquid laboriosam est repudiandae.\n      </p>\n      <DialogsWrap lockPageScroll>\n        <Dialog1 dialogName={DIALOG_NAMES.D1} money={money} />\n        <Dialog2 dialogName={DIALOG_NAMES.D2} />\n        <Dialog3 dialogName={DIALOG_NAMES.D3} />\n        <Dialog3d1 dialogName={DIALOG_NAMES.D3_1} count={count} />\n        <Dialog4 dialogName={DIALOG_NAMES.D4} />\n      </DialogsWrap>\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport Demo from './demo/App'\n\nexport default function DialogQueueCtrl() {\n  return <Demo />\n}\n","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}"],"names":["dialogData","queue","Queue","_classCallCheck","dataStore","this","_createClass","key","value","e","push","shift","unshift","splice","length","join","runDequeue","document","dispatchEvent","CustomEvent","eventName","detail","front","openInQueue","dialogName","options","arguments","undefined","isEmpty","enqueue","cutToFrontNextInQueue","cutToSecond","close","isLast","_objectSpread","dequeue","Promise","resolve","setTimeout","_ref","children","el","useRef","createElement","useEffect","body","appendChild","current","parentElement","removeChild","createPortal","bodyElement","querySelector","scrollTop","props","_props$maskBgColor","maskBgColor","_props$lockPageScroll","lockPageScroll","_props$zIndex","zIndex","_useState","useState","opacity","transform","_useState2","_slicedToArray","style","setStyle","_useState3","_useState4","withoutMask","setWithoutMask","_useState5","_useState6","showDialogIndex","setShowDialogIndex","addEventListener","_e$detail$options","Children","child","index","showDialog","console","warn","hideDialog","position","window","scrollY","top","concat","_ref$isLast","scrollTo","renderDialog","c","cloneElement","_jsx","Portal","_Fragment","className","backgroundColor","backdropFilter","WebkitBackdropFilter","_props$dialogData","_props$dialogData2","_props$dialogData3","money","_jsxs","name","a","b","ba","onClick","dialogQueueCtrl","DIALOG_NAMES","D4","count","setMoney","setCount","log","pre","D1","D2","D3","D3_1","DialogsWrap","Dialog1","Dialog2","Dialog3","Dialog3d1","Dialog4","DialogQueueCtrl","Demo","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","target","i","source","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty"],"sourceRoot":""}