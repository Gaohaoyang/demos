{"version":3,"file":"static/js/570.87da69f9.chunk.js","mappings":"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","sources":["PartyPopper/Component/Parallelogram.ts","PartyPopper/Component/motionLogic.ts","PartyPopper/Component/index.tsx","PartyPopper/index.tsx"],"sourcesContent":["// 平行四边形\n/* eslint-disable no-param-reassign */\nclass Parallelogram {\n  x: number\n\n  y: number\n\n  radius: number | undefined\n\n  vx: number\n\n  vy: number\n\n  color: string\n\n  rotation: number\n\n  scaleX: number\n\n  scaleY: number\n\n  boundary: number\n\n  constructor(color: string) {\n    this.x = 0\n    this.y = 0\n    this.boundary = 12\n    this.vx = 0\n    this.vy = 0\n    this.color = color\n    this.rotation = 0\n    this.scaleX = 1\n    this.scaleY = 1\n  }\n\n  /**\n   * draw\n   */\n  public draw(context: CanvasRenderingContext2D) {\n    context.save()\n    context.translate(this.x, this.y)\n    context.rotate(this.rotation)\n    context.scale(this.scaleX, this.scaleY)\n\n    context.fillStyle = this.color\n    context.beginPath()\n\n    context.moveTo(-6, -2.5)\n    context.lineTo(6, -2.5)\n    context.lineTo(10, 2.5)\n    context.lineTo(-2, 2.5)\n    context.lineTo(-6, -2.5)\n\n    context.closePath()\n    context.fill()\n    context.restore()\n  }\n}\n\nexport default Parallelogram\n","import Parallelogram from './Parallelogram'\n\ninterface IMotionLogicOptions {\n  elementsNum: number\n  colors: string[]\n  canvas: HTMLCanvasElement\n}\n\nconst maxSpeedV0X = 80\nconst maxSpeedV0Y = 380\nconst gravity = 160 // 重力加速度， 单位 像素/s^2\nlet elements: Parallelogram[] = []\nconst initMaxAngle = 360 // 初始最大角度\nconst maxAngleSpeed = 580 // 最大角速度\n\n/**\n * 动画逻辑\n */\nconst motionLogic = (ctx: CanvasRenderingContext2D, options: IMotionLogicOptions) => {\n  const { elementsNum, colors, canvas } = options\n\n  let then = 0\n  let start = false\n\n  const initElements = () => {\n    elements = []\n    for (let i = 0; i < elementsNum; i += 1) {\n      const element = new Parallelogram(colors[i % colors.length])\n      element.x = canvas.width / 2\n      element.y = canvas.height / 2\n      element.vx = (Math.random() * 2 - 1) * maxSpeedV0X\n      element.vy = -Math.random() * maxSpeedV0Y\n      element.rotation = ((Math.random() * 2 - 1) * initMaxAngle * Math.PI) / 180\n      elements.push(element)\n    }\n  }\n\n  const drawFrame = (time: number) => {\n    const timeInSeconds = time / 1000 // 将毫秒转为秒单位\n    const deltaTime = timeInSeconds - then\n    then = timeInSeconds\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n    for (let i = elements.length - 1; i > -1; i -= 1) {\n      elements[i].vy += gravity * deltaTime\n      elements[i].x += elements[i].vx * deltaTime\n      elements[i].y += elements[i].vy * deltaTime\n\n      if (elements[i].rotation > 0) {\n        elements[i].rotation += (Math.random() * maxAngleSpeed * deltaTime * Math.PI) / 180\n      } else {\n        elements[i].rotation += (Math.random() * -maxAngleSpeed * deltaTime * Math.PI) / 180\n      }\n      elements[i].draw(ctx)\n\n      if (\n        elements[i].x - elements[i].boundary > canvas.width\n        || elements[i].x + elements[i].boundary < 0\n        || elements[i].y - elements[i].boundary > canvas.height\n      ) {\n        if (start) {\n          elements[i].x = canvas.width / 2\n          elements[i].y = canvas.height / 2\n          elements[i].vx = (Math.random() * 2 - 1) * maxSpeedV0X\n          elements[i].vy = -Math.random() * maxSpeedV0Y\n        } else {\n          elements.splice(i, 1)\n          if (elements.length === 0) {\n            return\n          }\n        }\n      }\n    }\n    window.requestAnimationFrame(drawFrame)\n  }\n\n  document.addEventListener('partyPopperStart', (e: any) => {\n    if (e.detail) {\n      start = true\n      initElements()\n      drawFrame(0)\n    } else {\n      start = false\n    }\n  })\n}\n\nexport default motionLogic\n","/* eslint-disable no-param-reassign */\nimport React, { CSSProperties, useEffect, useRef } from 'react'\nimport motionLogic from './motionLogic'\n\ninterface IPartyPopper {\n  /**\n   * 元素数量\n   * 默认为 80，建议低端手机设置为 30\n   * */\n  elementsNum?: number\n\n  /**\n   * 元素颜色，默认为 ['#709EFF', '#FFFF4E', '#FFA74C', '#FF5485']\n   */\n  colors?: string[]\n\n  /** 样式（容器样式） */\n  // style?: CSSProperties\n\n  /** 是否开始动画 */\n  start?: boolean\n}\n\nconst defaultStyle: CSSProperties = {\n  width: '100vw',\n  height: '100vh',\n  position: 'absolute',\n  top: '0',\n  left: '0',\n  pointerEvents: 'none',\n}\n\n/**\n * 设置 Canvas 尺寸\n */\nconst setCanvasSize = (canvas: HTMLCanvasElement, wrap: HTMLDivElement) => {\n  const wrapRect = wrap.getBoundingClientRect()\n  canvas.width = wrapRect.width\n  canvas.height = wrapRect.height\n}\n\n/**\n * 撒花\n */\nfunction PartyPopper(props: IPartyPopper) {\n  const {\n    elementsNum = 80,\n    colors = ['#709EFF', '#FFFF4E', '#FFA74C', '#FF5485'],\n    start = false,\n  } = props\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const wrapRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (canvasRef.current && wrapRef.current) {\n      setCanvasSize(canvasRef.current, wrapRef.current)\n\n      const ctx = canvasRef.current.getContext('2d')\n      if (ctx) {\n        motionLogic(ctx, {\n          elementsNum,\n          colors,\n          canvas: canvasRef.current,\n        })\n      }\n    }\n  }, [])\n\n  useEffect(() => {\n    const e = new CustomEvent('partyPopperStart', {\n      detail: start,\n    })\n    document.dispatchEvent(e)\n  }, [start])\n\n  return (\n    <div style={defaultStyle} ref={wrapRef}>\n      <canvas ref={canvasRef} />\n    </div>\n  )\n}\n\nexport default PartyPopper\n","/* eslint-disable react/button-has-type */\nimport React, { useState } from 'react'\nimport PartyPopper from './Component'\n\nfunction index() {\n  const [start, setStart] = useState(false)\n\n  return (\n    <div\n      style={{\n        width: '100vw',\n        height: '100vh',\n        backgroundColor: '#333',\n        position: 'absolute',\n        top: '0',\n        left: '0',\n      }}\n    >\n      <PartyPopper elementsNum={100} start={start} />\n      <button\n        style={{\n          position: 'absolute',\n          top: '24px',\n          right: '24px',\n        }}\n        onClick={() => {\n          setStart(true)\n        }}\n      >\n        start\n      </button>\n\n      <button\n        style={{\n          position: 'absolute',\n          top: '72px',\n          right: '24px',\n        }}\n        onClick={() => {\n          setStart(false)\n        }}\n      >\n        stop\n      </button>\n    </div>\n  )\n}\n\nexport default index\n"],"names":["Parallelogram","color","x","y","radius","vx","vy","rotation","scaleX","scaleY","boundary","this","context","save","translate","rotate","scale","fillStyle","beginPath","moveTo","lineTo","closePath","fill","restore","elements","ctx","options","elementsNum","colors","canvas","then","start","drawFrame","time","timeInSeconds","deltaTime","clearRect","width","height","i","length","Math","random","PI","draw","splice","window","requestAnimationFrame","document","addEventListener","e","detail","element","push","initElements","defaultStyle","position","top","left","pointerEvents","props","canvasRef","useRef","wrapRef","useEffect","current","wrap","wrapRect","getBoundingClientRect","setCanvasSize","getContext","motionLogic","CustomEvent","dispatchEvent","style","ref","useState","setStart","backgroundColor","right","onClick"],"sourceRoot":""}