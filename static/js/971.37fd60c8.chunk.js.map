{"version":3,"file":"static/js/971.37fd60c8.chunk.js","mappings":"qNACA,EAA4B,kCAA5B,EAA8E,sCAA9E,EAA4H,8BAA5H,EAAkK,8BAAlK,EAAyM,+BAAzM,EAAgP,8BAAhP,EAAoR,4BAApR,EAAuT,6B,SC+FvT,MArFA,WACE,OAAkCA,EAAAA,EAAAA,YAAlC,eAAOC,EAAP,KAAkBC,EAAlB,KACA,GAAsBF,EAAAA,EAAAA,YAAtB,eAAOG,EAAP,KAAYC,EAAZ,KACMC,GAAmBC,EAAAA,EAAAA,QAAuB,MAgBhD,OAdAC,EAAAA,EAAAA,YAAU,WACRC,IACE,+FACAC,MAAK,SAACC,GACNN,EAAOM,EACR,IACDC,EAAAA,UACE,iMACA,SAACC,EAAKC,GACJX,EAAaW,EACd,GAEJ,GAAE,KAGD,iBAAKC,UAAWC,EAAhB,WACE,iBAAKD,UAAWC,EAAsBC,IAAKX,EAA3C,UACGF,IAAO,gBAAKc,IAAG,gCAA2Bd,GAAOe,IAAI,UAAUJ,UAAWC,KAE3E,gBAAKD,UAAWC,EAAhB,oCACA,gBAAKD,UAAWC,EAAeE,IAAKhB,EAAWiB,IAAI,eAErD,gBAAKJ,UAAWC,EAAhB,oBACA,mBACED,UAAWC,EACXI,KAAK,SACLC,QAAS,WACHf,EAAiBgB,SACnBC,IAAYjB,EAAiBgB,QAAS,CACpCE,YAAY,IACXd,MAAK,SAACe,GACPC,SAASC,KAAKC,YAAYH,EAC3B,GAGJ,EAZH,wBAgBA,mBACEV,UAAWC,EACXI,KAAK,SACLC,QAAS,WAGDf,EAAiBgB,SACnBC,IAAYjB,EAAiBgB,QAAS,IAGnCZ,MAAK,SAACe,GAIL,OAFAA,EAAOI,MAAMC,QAAU,OACvBJ,SAASC,KAAKC,YAAYH,GACnBA,CACR,IACAf,MAAK,SAACe,GACL,IAAMM,EAAQN,EACXO,UAAU,aACVC,QAAQ,YAAa,sBACxBC,QAAQC,IAAIJ,GAEZ,IAAMK,EAAIV,SAASW,cAAc,KACjCD,EAAEE,aAAa,WAAY,gBAC3BF,EAAEE,aAAa,OAAQP,GACvBK,EAAEG,QACFd,EAAOe,QACR,GAMR,EAjCH,wBAuCL,C","sources":["webpack://demos/./src/CompositeImage/index.module.css?9e75","CompositeImage/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"CompositeImage_container__0lpOk\",\"compositeWrap\":\"CompositeImage_compositeWrap__tk9Us\",\"bgImg\":\"CompositeImage_bgImg__wXTE2\",\"title\":\"CompositeImage_title__LGAWT\",\"qrCode\":\"CompositeImage_qrCode__QznI-\",\"cover\":\"CompositeImage_cover__67f3G\",\"btn\":\"CompositeImage_btn__q32-c\",\"btn2\":\"CompositeImage_btn2__2EOYA\"};","/* eslint-disable max-len */\nimport React, { useEffect, useState, useRef } from 'react'\nimport QRCode from 'qrcode'\nimport imageToBase64 from 'image-to-base64/browser'\nimport html2canvas from 'html2canvas'\nimport styles from './index.module.css'\n\n/**\n * 合图\n * @returns\n */\nfunction CompositeImage() {\n  const [qrCodeUrl, setQrCodeUrl] = useState<string>()\n  const [img, setImg] = useState<string>()\n  const compositeWrapRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    imageToBase64(\n      'https://gw.alicdn.com/imgextra/i2/O1CN01G118Au1RxZQ9WFyAA_!!6000000002178-2-tps-427-640.png',\n    ).then((res: string) => {\n      setImg(res)\n    })\n    QRCode.toDataURL(\n      '测试二维码生成。吾生也有涯，而知也无涯，以有涯随无涯，殆也 --庄子',\n      (err, url) => {\n        setQrCodeUrl(url)\n      },\n    )\n  }, [])\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.compositeWrap} ref={compositeWrapRef}>\n        {img && <img src={`data:image/png;base64,${img}`} alt=\"bgImage\" className={styles.bgImg} />}\n\n        <div className={styles.title}>Lorem ipsum dolor sit</div>\n        <img className={styles.qrCode} src={qrCodeUrl} alt=\"qrCode\" />\n      </div>\n      <div className={styles.cover}>cover</div>\n      <button\n        className={styles.btn}\n        type=\"button\"\n        onClick={() => {\n          if (compositeWrapRef.current) {\n            html2canvas(compositeWrapRef.current, {\n              allowTaint: true,\n            }).then((canvas: any) => {\n              document.body.appendChild(canvas)\n            })\n          }\n          // console.log('Composite')\n        }}\n      >\n        Composite\n      </button>\n      <button\n        className={styles.btn2}\n        type=\"button\"\n        onClick={() => {\n          const capture = () => {\n            // const captureElement = document.querySelector('#capture')\n            if (compositeWrapRef.current) {\n              html2canvas(compositeWrapRef.current, {\n                // allowTaint: true,\n              })\n                .then((canvas) => {\n                  // eslint-disable-next-line no-param-reassign\n                  canvas.style.display = 'none'\n                  document.body.appendChild(canvas)\n                  return canvas\n                })\n                .then((canvas) => {\n                  const image = canvas\n                    .toDataURL('image/png')\n                    .replace('image/png', 'image/octet-stream')\n                  console.log(image)\n\n                  const a = document.createElement('a')\n                  a.setAttribute('download', 'my-image.png')\n                  a.setAttribute('href', image)\n                  a.click()\n                  canvas.remove()\n                })\n            }\n          }\n          capture()\n\n          // console.log('Download')\n        }}\n      >\n        Download\n      </button>\n    </div>\n  )\n}\n\nexport default CompositeImage\n"],"names":["useState","qrCodeUrl","setQrCodeUrl","img","setImg","compositeWrapRef","useRef","useEffect","imageToBase64","then","res","QRCode","err","url","className","styles","ref","src","alt","type","onClick","current","html2canvas","allowTaint","canvas","document","body","appendChild","style","display","image","toDataURL","replace","console","log","a","createElement","setAttribute","click","remove"],"sourceRoot":""}