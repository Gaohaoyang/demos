{"version":3,"file":"static/js/985.a64a1975.chunk.js","mappings":"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","sources":["webpack://demos/./src/FerrisWheel/index.module.css?5291","FerrisWheel/utils/degree2Radian.ts","FerrisWheel/utils/getPos.ts","FerrisWheel/utils/WheelAndRoomsRotate.ts","FerrisWheel/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"FerrisWheel_container__XxQ8n\",\"ferris\":\"FerrisWheel_ferris__DN9zv\",\"wheel\":\"FerrisWheel_wheel__LZcpm\",\"roomsArea\":\"FerrisWheel_roomsArea__-DTtx\",\"room\":\"FerrisWheel_room__6okD+\",\"bottom\":\"FerrisWheel_bottom__nbg20\"};","/**\n * 角度转为弧度\n * @param radius 角度\n * @returns 弧度\n */\nconst getRadian = (radius: number) => (radius * Math.PI) / 180\n\nexport default getRadian\n","import degree2Radian from './degree2Radian'\n\n/**\n * 获取位置\n * @param r 半径\n * @param count 个数\n */\nconst getPos = (r: number, count: number) => {\n  const angleRadian = degree2Radian(360 / count)\n  const res: Array<{\n    x: number\n    y: number\n  }> = []\n  for (let i = 0; i < count; i += 1) {\n    res.push({\n      x: r * Math.cos(angleRadian * i),\n      y: r * Math.sin(angleRadian * i),\n    })\n  }\n  return res\n}\n\nexport default getPos\n","import anime from 'animejs'\n\nexport default class WheelAndRoomsRotate {\n  wheelDom: HTMLElement\n\n  roomsDoms: NodeListOf<Element>\n\n  timeline: anime.AnimeTimelineInstance | undefined\n\n  constructor(wheelDom: HTMLElement, roomsDoms: NodeListOf<Element>, autoPlay = false) {\n    this.wheelDom = wheelDom\n    this.roomsDoms = roomsDoms\n    this.initTimeLine(autoPlay)\n  }\n\n  private initTimeLine(autoPlay: boolean) {\n    this.timeline = anime.timeline({\n      easing: 'linear',\n      duration: 8000,\n      loop: true,\n      autoplay: autoPlay,\n    })\n    this.timeline\n      .add({\n        targets: this.wheelDom,\n        rotate: 360,\n      })\n      .add(\n        {\n          targets: this.roomsDoms,\n          rotate: -360,\n        },\n        0,\n      )\n  }\n\n  play() {\n    this.timeline?.play()\n  }\n\n  stop() {\n    this.timeline?.pause()\n  }\n\n  reset() {\n    anime.remove(this.wheelDom)\n    anime.remove(this.roomsDoms)\n    anime.set(this.roomsDoms, {\n      rotate: 0,\n    })\n    anime.set(this.wheelDom, {\n      rotate: 0,\n    })\n  }\n\n  restart(roomsDoms: NodeListOf<Element>) {\n    this.roomsDoms = roomsDoms\n    this.reset()\n    this.initTimeLine(true)\n  }\n\n  reverse() {\n    this.timeline?.reverse()\n  }\n}\n","/* eslint-disable react/no-array-index-key */\nimport React, {\n  useEffect, useRef, useState, memo,\n} from 'react'\nimport GUI from 'lil-gui'\nimport styles from './index.module.css'\nimport getPos from './utils/getPos'\nimport WheelAndRoomsRotate from './utils/WheelAndRoomsRotate'\n\n/**\n * 摩天轮\n */\nfunction FerrisWheel() {\n  const guiObj = {\n    count: 8,\n    start: () => { },\n    stop: () => { },\n    restart: () => { },\n    reverse: () => { },\n  }\n\n  const wheelDomRef = useRef<HTMLDivElement>(null)\n  const animationRef = useRef<WheelAndRoomsRotate>()\n  const [count, setCount] = useState(guiObj.count)\n\n  useEffect(() => {\n    const gui = new GUI()\n\n    if (wheelDomRef.current) {\n      animationRef.current = new WheelAndRoomsRotate(\n        wheelDomRef.current,\n        wheelDomRef.current?.querySelectorAll('.wheelRooms'),\n        false,\n      )\n\n      gui.add(guiObj, 'count', 6, 16, 1).onFinishChange((e: number) => {\n        setCount(e)\n      })\n      guiObj.start = () => {\n        animationRef.current?.play()\n      }\n      guiObj.stop = () => {\n        animationRef.current?.stop()\n      }\n      guiObj.reverse = () => {\n        animationRef.current?.reverse()\n      }\n      gui.add(guiObj, 'start')\n      gui.add(guiObj, 'stop')\n      gui.add(guiObj, 'reverse')\n    }\n    return () => {\n      gui.destroy()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (wheelDomRef.current) {\n      animationRef.current?.restart(wheelDomRef.current.querySelectorAll('.wheelRooms'))\n    }\n  }, [count])\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.ferris}>\n        <div className={styles.wheel} ref={wheelDomRef}>\n          <div className={styles.roomsArea}>\n            {\n              getPos(202 / 2, count).map((item, index) => (\n                <div\n                  key={index}\n                  className={`${styles.room} wheelRooms`}\n                  style={{\n                    top: `${item.y}px`,\n                    left: `${item.x - 20}px`,\n                  }}\n                />\n              ))\n            }\n          </div>\n        </div>\n        <div className={styles.bottom} />\n      </div>\n    </div>\n  )\n}\n\nexport default memo(FerrisWheel)\n"],"names":["radius","Math","PI","r","count","angleRadian","degree2Radian","res","i","push","x","cos","y","sin","WheelAndRoomsRotate","wheelDom","roomsDoms","autoPlay","arguments","length","undefined","_classCallCheck","timeline","this","initTimeLine","_createClass","key","value","anime","easing","duration","loop","autoplay","add","targets","rotate","_this$timeline","play","_this$timeline2","pause","reset","_this$timeline3","reverse","FerrisWheel","guiObj","start","stop","restart","wheelDomRef","useRef","animationRef","_useState","useState","_useState2","_slicedToArray","setCount","useEffect","_wheelDomRef$current","gui","GUI","current","querySelectorAll","onFinishChange","e","_animationRef$current","_animationRef$current2","_animationRef$current3","destroy","_animationRef$current4","_jsx","className","styles","children","_jsxs","ref","getPos","map","item","index","concat","style","top","left","memo"],"sourceRoot":""}