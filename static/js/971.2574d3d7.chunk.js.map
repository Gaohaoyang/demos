{"version":3,"file":"static/js/971.2574d3d7.chunk.js","mappings":"sNACA,EAA4B,kCAA5B,EAA8E,sCAA9E,EAA4H,8BAA5H,EAAkK,8BAAlK,EAAyM,+BAAzM,EAAgP,8BAAhP,EAAoR,4BAApR,EAAuT,6B,SC+FvT,MArFA,WACE,IAAAA,GAAkCC,EAAAA,EAAAA,YAAkBC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA7CI,EAASF,EAAA,GAAEG,EAAYH,EAAA,GAC9BI,GAAsBL,EAAAA,EAAAA,YAAkBM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAjCE,EAAGD,EAAA,GAAEE,EAAMF,EAAA,GACZG,GAAmBC,EAAAA,EAAAA,QAAuB,MAgBhD,OAdAC,EAAAA,EAAAA,YAAU,WACRC,IACE,+FACAC,MAAK,SAACC,GACNN,EAAOM,EACT,IACAC,EAAAA,UACE,iMACA,SAACC,EAAKC,GACJb,EAAaa,EACf,GAEJ,GAAG,KAGDC,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAiBC,SAAA,EAC/BH,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAsBE,IAAKb,EAAiBY,SAAA,CACzDd,IAAOgB,EAAAA,EAAAA,KAAA,OAAKC,IAAG,yBAAAC,OAA2BlB,GAAOmB,IAAI,UAAUP,UAAWC,KAE3EG,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAaC,SAAC,2BAC9BE,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAeI,IAAKrB,EAAWuB,IAAI,eAErDH,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAaC,SAAC,WAC9BE,EAAAA,EAAAA,KAAA,UACEJ,UAAWC,EACXO,KAAK,SACLC,QAAS,WACHnB,EAAiBoB,SACnBC,IAAYrB,EAAiBoB,QAAS,CACpCE,YAAY,IACXlB,MAAK,SAACmB,GACPC,SAASC,KAAKC,YAAYH,EAC5B,GAGJ,EAAEX,SACH,eAGDE,EAAAA,EAAAA,KAAA,UACEJ,UAAWC,EACXO,KAAK,SACLC,QAAS,WAGDnB,EAAiBoB,SACnBC,IAAYrB,EAAiBoB,QAAS,CACpC,GAEChB,MAAK,SAACmB,GAIL,OAFAA,EAAOI,MAAMC,QAAU,OACvBJ,SAASC,KAAKC,YAAYH,GACnBA,CACT,IACCnB,MAAK,SAACmB,GACL,IAAMM,EAAQN,EACXO,UAAU,aACVC,QAAQ,YAAa,sBACxBC,QAAQC,IAAIJ,GAEZ,IAAMK,EAAIV,SAASW,cAAc,KACjCD,EAAEE,aAAa,WAAY,gBAC3BF,EAAEE,aAAa,OAAQP,GACvBK,EAAEG,QACFd,EAAOe,QACT,GAMR,EAAE1B,SACH,eAKP,C","sources":["webpack://demos/./src/CompositeImage/index.module.css?9e75","CompositeImage/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"CompositeImage_container__0lpOk\",\"compositeWrap\":\"CompositeImage_compositeWrap__tk9Us\",\"bgImg\":\"CompositeImage_bgImg__wXTE2\",\"title\":\"CompositeImage_title__LGAWT\",\"qrCode\":\"CompositeImage_qrCode__QznI-\",\"cover\":\"CompositeImage_cover__67f3G\",\"btn\":\"CompositeImage_btn__q32-c\",\"btn2\":\"CompositeImage_btn2__2EOYA\"};","/* eslint-disable max-len */\nimport React, { useEffect, useState, useRef } from 'react'\nimport QRCode from 'qrcode'\nimport imageToBase64 from 'image-to-base64/browser'\nimport html2canvas from 'html2canvas'\nimport styles from './index.module.css'\n\n/**\n * 合图\n * @returns\n */\nfunction CompositeImage() {\n  const [qrCodeUrl, setQrCodeUrl] = useState<string>()\n  const [img, setImg] = useState<string>()\n  const compositeWrapRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    imageToBase64(\n      'https://gw.alicdn.com/imgextra/i2/O1CN01G118Au1RxZQ9WFyAA_!!6000000002178-2-tps-427-640.png',\n    ).then((res: string) => {\n      setImg(res)\n    })\n    QRCode.toDataURL(\n      '测试二维码生成。吾生也有涯，而知也无涯，以有涯随无涯，殆也 --庄子',\n      (err, url) => {\n        setQrCodeUrl(url)\n      },\n    )\n  }, [])\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.compositeWrap} ref={compositeWrapRef}>\n        {img && <img src={`data:image/png;base64,${img}`} alt=\"bgImage\" className={styles.bgImg} />}\n\n        <div className={styles.title}>Lorem ipsum dolor sit</div>\n        <img className={styles.qrCode} src={qrCodeUrl} alt=\"qrCode\" />\n      </div>\n      <div className={styles.cover}>cover</div>\n      <button\n        className={styles.btn}\n        type=\"button\"\n        onClick={() => {\n          if (compositeWrapRef.current) {\n            html2canvas(compositeWrapRef.current, {\n              allowTaint: true,\n            }).then((canvas: any) => {\n              document.body.appendChild(canvas)\n            })\n          }\n          // console.log('Composite')\n        }}\n      >\n        Composite\n      </button>\n      <button\n        className={styles.btn2}\n        type=\"button\"\n        onClick={() => {\n          const capture = () => {\n            // const captureElement = document.querySelector('#capture')\n            if (compositeWrapRef.current) {\n              html2canvas(compositeWrapRef.current, {\n                // allowTaint: true,\n              })\n                .then((canvas) => {\n                  // eslint-disable-next-line no-param-reassign\n                  canvas.style.display = 'none'\n                  document.body.appendChild(canvas)\n                  return canvas\n                })\n                .then((canvas) => {\n                  const image = canvas\n                    .toDataURL('image/png')\n                    .replace('image/png', 'image/octet-stream')\n                  console.log(image)\n\n                  const a = document.createElement('a')\n                  a.setAttribute('download', 'my-image.png')\n                  a.setAttribute('href', image)\n                  a.click()\n                  canvas.remove()\n                })\n            }\n          }\n          capture()\n\n          // console.log('Download')\n        }}\n      >\n        Download\n      </button>\n    </div>\n  )\n}\n\nexport default CompositeImage\n"],"names":["_useState","useState","_useState2","_slicedToArray","qrCodeUrl","setQrCodeUrl","_useState3","_useState4","img","setImg","compositeWrapRef","useRef","useEffect","imageToBase64","then","res","QRCode","err","url","_jsxs","className","styles","children","ref","_jsx","src","concat","alt","type","onClick","current","html2canvas","allowTaint","canvas","document","body","appendChild","style","display","image","toDataURL","replace","console","log","a","createElement","setAttribute","click","remove"],"sourceRoot":""}