{"version":3,"file":"static/js/469.02f72a03.chunk.js","mappings":"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","sources":["DialogQueueCtrl/temp/index.tsx","DialogQueueCtrl/temp/eventName.ts","DialogQueueCtrl/temp/dialogQueueCtrl.ts","DialogQueueCtrl/temp/Queue.ts","DialogQueueCtrl/temp/Portal.tsx","DialogQueueCtrl/temp/lockBodyScroll.ts","DialogQueueCtrl/demo/Dialog1.tsx","DialogQueueCtrl/demo/Dialog2.tsx","DialogQueueCtrl/demo/DIALOG_NAMES.ts","DialogQueueCtrl/demo/Dialog3.tsx","DialogQueueCtrl/demo/Dialog3_1.tsx","DialogQueueCtrl/demo/Dialog4.tsx","DialogQueueCtrl/demo/App.tsx","DialogQueueCtrl/index.tsx","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable no-console */\n/* eslint-disable @typescript-eslint/no-use-before-define */\nimport React, {\n  CSSProperties, useEffect, useState, Children, cloneElement,\n} from 'react'\nimport dialogQueueCtrl, { OpenInQueueType, CloseEventType } from './dialogQueueCtrl'\nimport Portal from './Portal'\nimport './index.css'\nimport eventName from './eventName'\nimport { lock, unlock } from './lockBodyScroll'\n\ninterface IDialogWrapProps {\n  /** 蒙层背景色 */\n  maskBgColor?: string\n  /** 弹窗弹出时，页面是否禁止滚动，默认为 true */\n  lockPageScroll?: boolean\n  /** 遮罩层和弹窗的 `z-index` 值 */\n  zIndex?: number\n  children: React.ReactNode\n}\n\nlet dialogData: any\n\nfunction DialogsWrap(props: IDialogWrapProps) {\n  const {\n    children, maskBgColor = 'rgba(0,0,0,0.7)', lockPageScroll = true, zIndex = 200,\n  } = props\n\n  const [style, setStyle] = useState<CSSProperties>({\n    opacity: 0,\n    transform: 'scale(0.1)',\n  })\n  const [withoutMask, setWithoutMask] = useState(false)\n  const [showDialogIndex, setShowDialogIndex] = useState(-1)\n\n  useEffect(() => {\n    /**\n     * 监听打开\n     */\n    document.addEventListener(eventName.OPEN_DIALOG, (e: any) => {\n      if (!e.detail.dialogName) {\n        console.warn('you may miss the dialogName')\n        return\n      }\n      if (e.detail.options.dialogData) {\n        dialogData = e.detail.options.dialogData\n      }\n\n      Children.forEach(children, (child: any, index: number) => {\n        if (e.detail.dialogName === child.props.dialogName) {\n          showDialog(index)\n        }\n      })\n\n      if (e.detail.options?.withoutMask) {\n        setWithoutMask(true)\n      } else {\n        setWithoutMask(false)\n      }\n    })\n\n    /**\n     * 监听关闭\n     */\n    document.addEventListener(eventName.CLOSE_DIALOG, (e: any) => {\n      hideDialog({ isLast: e.detail.isLast })\n    })\n  }, [])\n\n  const showDialog = (index: number) => {\n    setShowDialogIndex(index)\n    setTimeout(() => {\n      setStyle({\n        opacity: 1,\n        transform: 'scale(1)',\n      })\n      if (lockPageScroll) {\n        lock()\n      }\n    }, 20)\n  }\n\n  const hideDialog = ({ isLast = true }) => {\n    if (isLast) {\n      if (lockPageScroll) {\n        unlock()\n      }\n      setStyle({\n        opacity: 0,\n        transform: 'scale(1)',\n      })\n      setTimeout(() => {\n        setShowDialogIndex(-1)\n        dialogData = null\n        setStyle({\n          opacity: 0,\n          transform: 'scale(0.1)',\n        })\n      }, 180)\n    }\n  }\n\n  if (showDialogIndex === -1) return null\n\n  const renderDialog = (index: number) => {\n    let c\n    if (Children.count(children) === 1) {\n      c = children as React.ReactNode\n    } else {\n      c = (children as React.ReactNode[])[index]\n    }\n    if (dialogData) {\n      // @ts-ignore\n      c = cloneElement(c, { dialogData })\n    }\n    return c\n  }\n\n  return (\n    <Portal>\n      {withoutMask ? (\n        <>{renderDialog(showDialogIndex)}</>\n      ) : (\n        <div\n          className=\"dialog-queue-container\"\n          style={{\n            backgroundColor: maskBgColor,\n            opacity: style.opacity,\n            backdropFilter: 'blur(4px)',\n            WebkitBackdropFilter: 'blur(4px)',\n            zIndex,\n          }}\n        >\n          {renderDialog(showDialogIndex)}\n        </div>\n      )}\n    </Portal>\n  )\n}\n\nexport default DialogsWrap\n\nexport { dialogQueueCtrl }\n","const OPEN_DIALOG = 'OPEN_DIALOG_IN_QUEUE'\nconst CLOSE_DIALOG = 'CLOSE_DIALOG_IN_QUEUE'\n\nexport default {\n  OPEN_DIALOG,\n  CLOSE_DIALOG,\n}\n","import Queue from './Queue'\nimport eventName from './eventName'\n\ninterface OptionsType {\n  withoutMask?: boolean\n  animation?: 'zoomIn'\n  dialogData?: any\n}\nexport interface OpenInQueueType {\n  /** 弹窗名称 */\n  dialogName: string\n  /** 其他配置项 */\n  options: OptionsType | Record<string, never>\n}\nexport interface CloseEventType extends OpenInQueueType {\n  isLast?: boolean\n}\n\n// ----------------------------------------\n\nconst queue = new Queue()\n\n/**\n * 启动出队过程\n */\nconst runDequeue = () => {\n  document.dispatchEvent(\n    new CustomEvent<OpenInQueueType>(eventName.OPEN_DIALOG, {\n      detail: queue.front(),\n    }),\n  )\n}\n\n/**\n * 队列中打开\n */\nconst openInQueue = (dialogName: string, options: OptionsType = {}) => {\n  if (queue.isEmpty()) {\n    queue.enqueue({ dialogName, options })\n    runDequeue()\n  } else {\n    queue.enqueue({ dialogName, options })\n  }\n}\n\n/**\n * 插入到队首后面\n */\nconst cutToFrontNextInQueue = (dialogName: string, options: OptionsType = {}) => {\n  if (queue.isEmpty()) {\n    queue.enqueue({ dialogName, options })\n    runDequeue()\n  } else {\n    queue.cutToSecond({ dialogName, options })\n  }\n}\n\nconst close = () => {\n  let isLast = true // 是否为最后一个弹窗，关闭时动画会不同\n  if (queue.dataStore.length > 1) {\n    isLast = false\n  }\n  document.dispatchEvent(\n    new CustomEvent<CloseEventType>(eventName.CLOSE_DIALOG, {\n      detail: {\n        ...queue.front(),\n        isLast,\n      },\n    }),\n  )\n  queue.dequeue()\n\n  return new Promise((resolve) => {\n    if (queue.isEmpty()) {\n      setTimeout(() => {\n        resolve('') // todo\n      }, 200)\n    } else {\n      resolve('') // todo\n      runDequeue()\n    }\n  })\n}\n\nexport default {\n  openInQueue,\n  cutToFrontNextInQueue,\n  close,\n  queue,\n}\n","/**\n * 队列\n * 包含以下个主要 api\n * - enqueue\n * - dequeue\n * - cutToFront\n * - front\n * - back\n * - isEmpty\n */\nclass Queue {\n  constructor() {\n    this.dataStore = []\n  }\n\n  dataStore: any[]\n\n  /**\n   * enqueue\n   */\n  public enqueue(e: any): void {\n    this.dataStore.push(e)\n  }\n\n  /**\n   * dequeue\n   */\n  public dequeue() {\n    this.dataStore.shift()\n  }\n\n  /**\n   * 插队到队首\n   */\n  public cutToFront(e: any): void {\n    this.dataStore.unshift(e)\n  }\n\n  /**\n   * 插队到队首后面\n   */\n  public cutToSecond(e: any): void {\n    this.dataStore.splice(1, 0, e)\n  }\n\n  /**\n   * front\n   */\n  public front() {\n    return this.dataStore[0]\n  }\n\n  /**\n   * back\n   */\n  public back() {\n    return this.dataStore[this.dataStore.length - 1]\n  }\n\n  /**\n   * empty\n   */\n  public isEmpty(): boolean {\n    if (this.dataStore.length === 0) {\n      return true\n    }\n    return false\n  }\n\n  /**\n   * toString\n   */\n  public toString() {\n    return this.dataStore.join(',')\n  }\n}\n\nexport default Queue\n","import { useRef, useEffect } from 'react'\nimport { createPortal } from 'react-dom'\n\n/**\n * Portal 提供了一种将子元素渲染到存在于 DOM 组件层次结构之外的 DOM 节点\n * @param param\n * @returns\n */\n// @ts-ignore\nconst Portal = ({ children }) => {\n  const el = useRef(document.createElement('div'))\n\n  useEffect(() => {\n    document.body.appendChild(el.current)\n    const { parentElement } = el.current\n    return () => {\n      if (parentElement) {\n        parentElement.removeChild(el.current)\n      }\n    }\n  }, [])\n\n  return createPortal(children, el.current)\n}\n\nexport default Portal\n","const bodyElement = document.querySelector('body')\n// const scrollContainer: HTMLElement | null | undefined =\n// bodyElement?.parentElement;\n\nlet scrollTop = 0\n\n/**\n * 禁止 body 滚动\n */\nconst lock = () => {\n  if (!bodyElement) {\n    return\n  }\n  if (bodyElement.style.position !== 'fixed') {\n    scrollTop = window.scrollY\n  }\n  bodyElement.style.position = 'fixed'\n  bodyElement.style.top = `-${scrollTop}px`\n}\n\n/**\n * 解除禁止 body 滚动\n */\nconst unlock = () => {\n  if (!bodyElement) {\n    return\n  }\n  bodyElement.style.position = 'static'\n  bodyElement.style.top = 'unset'\n  window.scrollTo(0, scrollTop)\n}\n\n// const handleTouchmove = (e: TouchEvent) => {\n//   e.preventDefault();\n// };\n\n// const lock = () => {\n//   document.addEventListener('touchmove', handleTouchmove, { passive: false });\n// };\n// const unlock = () => {\n//   document.removeEventListener('touchmove', handleTouchmove);\n// };\n\nexport { lock, unlock }\n","/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable react/destructuring-assignment */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog1.css'\n\ninterface IProps {\n  money: number\n  dialogName: DIALOG_NAMES\n  dialogData?: {\n    name: string\n    a: number\n    b: {\n      ba: string\n    }\n  }\n}\n\nfunction Dialog1(props: IProps) {\n  const { money } = props\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">\n          Dialog1 ￥\n          {money}\n        </div>\n        <div className=\"content\">\n          name:\n          {' '}\n          {props.dialogData?.name}\n          {' '}\n          <br />\n          a:\n          {' '}\n          {props.dialogData?.a}\n          {' '}\n          <br />\n          ba:\n          {' '}\n          {props.dialogData?.b.ba}\n          {' '}\n          <br />\n          <br />\n          hello world!\n          <p>\n            1Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n          <p>\n            2Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n          <p>\n            3Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n          <p>\n            4Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod quae eveniet laudantium!\n            Architecto aperiam dolore iste odit distinctio expedita, illum officiis dolores natus\n            sunt unde maxime aliquid nostrum necessitatibus exercitationem.\n          </p>\n        </div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog1\n","/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog2.css'\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n}\n\nfunction Dialog2(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog 2</div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog2\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable @typescript-eslint/naming-convention */\nenum DIALOG_NAMES {\n  D1 = 'D1',\n  D2 = 'D2',\n  D3 = 'D3',\n  D3_1 = 'D3_1',\n  D4 = 'D4',\n}\n\nexport { DIALOG_NAMES }\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/button-has-type */\n/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog3.css'\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n}\n\nfunction Dialog3(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog3</div>\n        <button\n          onClick={() => {\n            dialogQueueCtrl.cutToFrontNextInQueue(DIALOG_NAMES.D4)\n            dialogQueueCtrl.close()\n          }}\n        >\n          将弹窗4插队\n        </button>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog3\n","/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog3_1.css'\n\ninterface DialogDataType {\n  name: string\n}\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n  dialogData?: DialogDataType\n  count: number\n}\n\nfunction Dialog3_1(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog3_1</div>\n        <div>测试没有 mask 的弹窗</div>\n        <div className=\"content\">\n          <div>\n            dialogData:\n            {' '}\n            {props.dialogData?.name}\n          </div>\n          <div>\n            count:\n            {' '}\n            {props.count}\n          </div>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n          <p>\n            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum fuga repellat soluta\n            consectetur. Perspiciatis eius deleniti odio, reprehenderit quod beatae repudiandae\n            inventore, eaque in earum culpa blanditiis ea, dolores exercitationem!\n          </p>\n        </div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog3_1\n","/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/no-unused-prop-types */\nimport React from 'react'\nimport { dialogQueueCtrl } from '../temp/index'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\n\nimport './Dialog4.css'\n\ninterface IProps {\n  dialogName: DIALOG_NAMES\n}\n\nfunction Dialog4(props: IProps) {\n  return (\n    <div className=\"container\">\n      <div className=\"dialog-panel\">\n        <div className=\"title\">Dialog4</div>\n      </div>\n      <div\n        className=\"close\"\n        onClick={() => {\n          dialogQueueCtrl.close()\n        }}\n      />\n    </div>\n  )\n}\n\nexport default Dialog4\n","/* eslint-disable react/button-has-type */\n/* eslint-disable no-console */\nimport React, { useEffect, useState } from 'react'\nimport DialogsWrap, { dialogQueueCtrl } from '../temp/index'\nimport Dialog1 from './Dialog1'\nimport Dialog2 from './Dialog2'\nimport Dialog3 from './Dialog3'\nimport Dialog3d1 from './Dialog3_1'\nimport Dialog4 from './Dialog4'\nimport { DIALOG_NAMES } from './DIALOG_NAMES'\nimport './App.css'\n\nfunction App() {\n  const [money, setMoney] = useState(0)\n  const [count, setCount] = useState(0)\n  useEffect(() => {}, [])\n\n  useEffect(() => {\n    console.log(dialogQueueCtrl.queue.dataStore)\n  }, [])\n\n  return (\n    <>\n      hello\n      <h1>测试弹窗队列</h1>\n      <p>\n        Lorem ipsum dolor sit amet consectetur, adipisicing elit. Animi dolor pariatur praesentium\n        voluptas eveniet quam quas commodi recusandae natus consequatur cum, exercitationem esse\n        laboriosam tenetur obcaecati accusamus aliquam nam error.\n      </p>\n      <button\n        onClick={() => {\n          setCount((pre) => pre + 1)\n          console.log('clicked')\n        }}\n      >\n        click me!\n      </button>\n      <h2>test</h2>\n      <button\n        onClick={() => {\n          dialogQueueCtrl.openInQueue(DIALOG_NAMES.D1, {\n            dialogData: {\n              name: 'dialog',\n              a: 2,\n              b: {\n                ba: 'blue',\n              },\n            },\n          })\n          setTimeout(() => {\n            setMoney(999)\n          }, 1000)\n          setTimeout(() => {\n            dialogQueueCtrl.openInQueue(DIALOG_NAMES.D2)\n          }, 20)\n          dialogQueueCtrl.openInQueue(DIALOG_NAMES.D3)\n          dialogQueueCtrl.openInQueue(DIALOG_NAMES.D3_1, {\n            withoutMask: true,\n            dialogData: {\n              name: 'chuanshi',\n            },\n          })\n        }}\n      >\n        open dialogs\n      </button>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Ex, non. Quod laborum distinctio\n        fuga nisi saepe qui ullam error iure eum excepturi quos, officia delectus, doloribus rerum\n        amet assumenda voluptatum.\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa neque, atque dolore tempora\n        laborum sint facilis possimus quia aliquid, praesentium consequuntur. Sapiente voluptatem\n        deserunt eius natus, corporis ipsam perspiciatis ullam!\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Iste asperiores a dicta mollitia\n        nobis placeat corrupti tempora odit magni accusantium maxime natus fuga facere tempore, quis\n        ratione! Ullam, exercitationem quasi.\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Non magnam maxime quibusdam,\n        inventore culpa unde velit, quae, ipsam rerum totam aspernatur reprehenderit sequi mollitia\n        vitae veniam cumque numquam deserunt iure!\n      </p>\n      <h2>test</h2>\n      <p>\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum labore sit ut, fugit eligendi\n        voluptas molestiae iusto, repellat sapiente voluptate necessitatibus cumque vitae suscipit\n        exercitationem. Dolorem aliquid laboriosam est repudiandae.\n      </p>\n      <DialogsWrap lockPageScroll>\n        <Dialog1 dialogName={DIALOG_NAMES.D1} money={money} />\n        <Dialog2 dialogName={DIALOG_NAMES.D2} />\n        <Dialog3 dialogName={DIALOG_NAMES.D3} />\n        <Dialog3d1 dialogName={DIALOG_NAMES.D3_1} count={count} />\n        <Dialog4 dialogName={DIALOG_NAMES.D4} />\n      </DialogsWrap>\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport Demo from './demo/App'\n\nexport default function DialogQueueCtrl() {\n  return <Demo />\n}\n","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["dialogData","queue","Queue","dataStore","this","e","push","shift","unshift","splice","length","join","runDequeue","document","dispatchEvent","CustomEvent","eventName","detail","front","openInQueue","dialogName","options","isEmpty","enqueue","cutToFrontNextInQueue","cutToSecond","close","isLast","dequeue","Promise","resolve","setTimeout","children","el","useRef","createElement","useEffect","body","appendChild","current","parentElement","removeChild","createPortal","bodyElement","querySelector","scrollTop","props","maskBgColor","lockPageScroll","zIndex","useState","opacity","transform","style","setStyle","withoutMask","setWithoutMask","showDialogIndex","setShowDialogIndex","addEventListener","Children","child","index","showDialog","console","warn","hideDialog","position","window","scrollY","top","scrollTo","renderDialog","c","cloneElement","className","backgroundColor","backdropFilter","WebkitBackdropFilter","money","name","a","b","ba","onClick","dialogQueueCtrl","DIALOG_NAMES","D4","count","setMoney","setCount","log","pre","D1","D2","D3","D3_1","DialogQueueCtrl","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","target","i","arguments","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty"],"sourceRoot":""}